// mB v7.14.11 on 2020-02-18T15:33:18.640Z
var httpRPC=function(){function httpRPC(t,o,e){this.user="",this.pswd="",this.token="",this.DEBUG=!1,this.httpOrs=t,this.host=o,this.port=e}return httpRPC.prototype.setUser=function(t,o){this.user=t,this.pswd=o},httpRPC.prototype.setToken=function(t){this.token=t},httpRPC.prototype.invoke=function(t,o,e,n){n||(n=2e3),e||(e={}),e.method=o,e.user=btoa(this.user),e.pswd=btoa(this.pswd),e.token=btoa(this.token),e.view=window.location.href
var r=JSON.stringify(e),i=LZString.compressToEncodedURIComponent(r),s=this,p=new Promise((function(e,n){var r=s.httpOrs+"://"+s.host+(s.port?":"+s.port:"")+"/"+t
r=r+"/?p="+i,fetch(r,{method:"GET",cache:"default",redirect:"follow",mode:"cors",keepalive:!0}).then((function(t){if(t.ok)return t.text()
n("HTTP protocol error in RPC: "+t.status+t)})).then((function(t){var r=JSON.parse(t)
r&&!r.errorMessage||n(o+" "+t),e(r.result)})).catch((function(t){n(o+" "+t)}))})),a=new Promise((function(t,o){setTimeout((function(){return o("timeout")}),n)}))
return Promise.race([p,a])},httpRPC.prototype.setItem=function(t,o){sessionStorage.setItem(t,o)},httpRPC.prototype.getItem=function(t){return sessionStorage.getItem(t)},httpRPC.prototype.log=function(t,o,e){var n=this,r={msg:t,page:window.location.pathname,level:o,className:e}
try{window.ENV&&(r.ENV=window.ENV),r.view=window.location.href,r.appVersion=btoa(navigator.appVersion),r.userAgent=btoa(navigator.userAgent),r.platform=btoa(navigator.platform)}catch(t){}setTimeout((function(){n.invoke("log","log",r)}),1)},httpRPC}()